
### Part 1. Установка ОС

Установка Ubuntu 20.04 Server LTS без графического интерфейса.

![linux](report_images/1_1.png)

- Версия Ubuntu из вывода команды

### Part 2. Создание пользователя

Создание пользователя.

![linux](report_images/2_1.png)

- Создание пользователя `user` через команду `useradd` с флагом `-m` для создания домашнего каталога

![linux](report_images/2_2.png)

- Добавление пользователя в группу `adm` через команду `usermod` с флагами `-aG` в дополнительную группу

![linux](report_images/2_3.png)

- Новый пользователь из вывода команды

### Part 3. Настройка сети ОС

Задание названия машины вида `user-1`.

![linux](report_images/3_1.png)

- Удаление строго имени и ввод нового в файле

![linux](report_images/3_2.png)

- Замена старого имени на нового в файле

Установка временной зоны.

![linux](report_images/3_3.png)

- Изменение часового пояса системы

![linux](report_images/3_4.png)

- Вывод текущих системных времни и даты 

Вывод названия сетевых интерфейсов.

![linux](report_images/3_5.png)

- Отображение информации сетевых интерфейсов

- Loopback обеспечивает связь между компьютерами через специальное ПО без применения дополнительного оборудования. В частности, трафик, отправляемый программой, отображается на интерфейсе. К тому же, для IP тоже используется технология loopback интерфейса. Самый распространенный IP на основе loopback — 127.0.0.1. В IPv4 — 127.0.0.0 до 127.255.255.255. IPv6 же принимает только 0:0:0:0:0:0:0:1. К тому же, вы можете попасть на, так сказать, сайт своего собственного компьютера при вводе http://127.0.0.1/ или же http://localhost/. Нужна такая страничка обычно для коммуникации с серверными приложениями, а также проверки IP в ОС (поскольку не нужно активного сетевого подключения).

Получение ip адреса устройства, от DHCP сервера.

![linux](report_images/3_6.png)

- ip адрес: inet 10.0.2.15

- DHCP служит для назначения IP-адреса клиенту. Это следует из его названия — Dynamic Host Configuration Protocol. IP-адрес можно назначать вручную каждому клиенту, то есть компьютеру в локальной сети. Но в больших сетях это очень трудозатратно, к тому же, чем больше локальная сеть, тем выше возрастает вероятность ошибки при настройке. Поэтому для автоматизации назначения IP был создан протокол DHCP.

Определение внешнего и внутреннего ip-адрес шлюза.

![linux](report_images/3_7.png)

- ip-адрес внутреннего шлюза: 10.0.2.2

![linux](report_images/3_8.png)

- ip-адрес внешнего шлюза через сайт получения ip-адреса и команды `wget`

Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).

![linux](report_images/3_9.png)

- С помощью netplan задаем статичные настройки: `addresses` - ip-адрес, `gateway4` - ip-адрес внутреннего шлюза, `nameservers` - dns сервера.

Перезагрузка ВМ.

![linux](report_images/3_10.png)

- Вывод пропингованного хоста 1.1.1.1

![linux](report_images/3_11.png)

- Вывод пропингованного хоста ya.ru

### Part 4. Обновление ОС

![linux](report_images/4_1.png)

- `dist_upgrade` выполяет «умное» разрешения конфликтов версий пакетов. При конфликтах пакетов Ubuntu попытается обновите наиболее важные пакеты за счет менее важных. Поэтому команда dist-upgrade может установить дополнительные пакеты или удалить один из конфликтующих пакетов.

### Part 5. Использование команды sudo

Разрешить пользователю, созданному в Part 2, выполнять команду sudo.

![linux](report_images/5_1.png)

- Выдаем пользователю права sudo

![linux](report_images/5_2.png)

- Изменяем hostname OC

- sudo позволяет клиенту задать практически любую команду с доступами, разрешениями и привилегиями root.

### Part 6. Установка и настройка службы времени

![linux](report_images/6_1.png)

- Вывод текущего времени

![linux](report_images/6_2.png)

- Вывод команды синхронизации

### Part 7. Установка и использование текстовых редакторов

Сохранение изменений в созданных файлах.

![linux](report_images/7_1.png)

- Создание файла с помощью VIM
- Для выхода и сохранения используем комнады wq

![linux](report_images/7_2.png)

- Создание файла с помощью NANO
- Для выхода и сохранения используем комнады control + s, control + x

![linux](report_images/7_3.png)

- Создание файла с помощью MCEDIT
- Для выхода и сохранения используем комнады esc + 2, esc + esc

Выход из файла без сохранения изменений

![linux](report_images/7_4.png)

- Для выхода без сохранения в VIM используем комнаду q!

![linux](report_images/7_5.png)

- Для выхода без сохранения в NANO используем комнаду control + x и при выборе сохранения буфера нажинаем n

![linux](report_images/7_6.png)

- Для выхода без сохранения в MCEDIT используем комнаду esc + esc, при выборе сохранения буфера выбираем no

Поиск и замена слова в текстовых редакторах.

VIM

![linux](report_images/7_7.png)

- Поиск шаблона с помощью команды /{patter}

![linux](report_images/7_8.png)

- Поиск и замена шаблона во всем файле /%s/{patter}/{string}/g

NANO

![linux](report_images/7_9.png)

- Поиск шаблона с помощью команды control + w

![linux](report_images/7_10.png)

- Поиск шаблона для замены происходит с помощью команды control + \, вводим шаблон для поиска, вводим шаблон для замены, выбираем yes при замене буфера

MCEDIT

![linux](report_images/7_11.png)

- Поиск шаблона с помощью команды esc + 7

![linux](report_images/7_12.png)

- Поиск и замена шаблона с помощью команды esc + 4

### Part 8. Установка и базовая настройка сервиса SSHD

Установка службы SSHd.

![linux](report_images/8_1.png)

- Установка службы SSHd через команду install openssh-server

Добавить автостарт службы при загрузке системы.

![linux](report_images/8_2.png)

- Добавление службы в автостарт через команду systemctl

Перенастроить службу SSHd на порт 2022.

![linux](report_images/8_3.png)

- Перенастройка службы SSHd на порт 2022 через NANO с изменением файла

Используя команду ps, показать наличие процесса sshd.

![linux](report_images/8_4.png)

- Используем команду ps, которая показывает состояние процессов.
    - флаг -F выводит максимально доступные данные процессов
        - UID - польтзователь, от имени которого запущен процесс
        - PID - инденфикатор процесса
        - PPID - индентификатор родительского процесса
        - C - процент времени CPU, используемое процессом
        - SZ - размера процесса в памяти
        - RSS - реальный размер процесса в памяти
        - PSR - ядро процессора, на котором выполняется процесс
        - STIME - время запуска процесса
        - TTY - терминал, из которого запущен процесс
        - TIME - общее время процессора, затраченного на выполнение процесса
        - CMD - команда запуска процесса
    - флаг -С выбирает процессы по имени команды

Перезагрузить систему.

![linux](report_images/8_5.png)

- Вывод команды netstat -tan по флагам
    - -t - подключение по протоколу TCP
    - -a - показывает все подключения
    - -n - показывает сетевые адреса как числа
- Вывод
    - Proto - протокол используемый сокетом
    - Recv-Q - количество байтов не переданных пользователем
    - Send-Q - количество байтов не подтвержденных удаленным хостом
    - Local Address - локальный адрес и номер порта локальной сети
    - Foreign Address - локальный адрес и номер порта удаленной сети
    - State - состояние сокета
- 0.0.0.0 обозначает, что никто не подключен к сети.

### Part 9. Установка и использование утилит top, htop

Установить и запустить утилиты top и htop.

![linux](report_images/9_1.png)

- Определения:
    - Первая линия:
        - uptime - локальное время и время прошедшее с последней перезагрузки
        - количество авторизованных пользователей - 1 user
        - общая загрузка системы - за последние 1 мин, 5 мин, 15 мин
    - Вторая линия:
        - общее количество процессов, далее их классификация
    - Третья линия:
        - загрузка cpu, распределенная в процентном соотношении по категориям
    - Четвертая и пятая линии:
        - загрузка памяти - первое определение показывает физическую память; второе - виртуальную память

    - Подсвечивается линия:

        ![linux](report_images/9_2.png)

        - pid процесса занимающего больше всего памяти

        ![linux](report_images/9_3.png)

        - pid процесса, занимающего больше всего процессорного времени

![linux](report_images/9_4.png)

    - С помощью хоткеев F4, F2, F3 настраиваем и фильтруем вывод команды htop

### Part 10. Использование утилиты fdisk

Запустить команду fdisk -l. 

![linux](report_images/10_1.png)

- Название: /dev/sda
- Размер: 10 GiB
- Кол-во секторов: 20971520
- Размер swap: 0

### Part 11. Использование утилиты df

Запустить команду df.

![linux](report_images/11_1.png)

- Размер раздела:
    - 9336140 кб
- Размер занятого пространства:
    - 4453296 кб
- Размер свободного пространства:
    - 4388868 кб
- Процент использования:
    - 51%

![linux](report_images/11_2.png)

- Тип файловой системы: ext4
- Размер раздела:
    - 9 гб
- Размер занятого пространства:
    - 4,3 гб
- Размер свободного пространства:
    - 4,2 гб
- Процент использования:
    - 51%

### Part 12. Использование утилиты du

Запустить команду du.

![linux](report_images/12_1.png)

Вывод размера папок.

![linux](report_images/12_2.png)

- -s флаг выводит общий размер
- -h флаг выводит размер в удобном для человеческого глаза вида

![linux](report_images/12_3.png)

- -а флаг выводит размер для всех файлов

### Part 13. Установка и использование утилиты ncdu

Установить утилиту ncdu.

![linux](report_images/13_4.png)

Вывести размер папок /home, /var, /var/log.

![linux](report_images/13_1.png)

![linux](report_images/13_2.png)

![linux](report_images/13_3.png)

### Part 14. Работа с системными журналами

![linux](report_images/14_1.png)

- Время последней авторизации: Jul 8 20:35:03, goblinar, LOGIN

![linux](report_images/14_2.png)

- Перезапуск службы SSHd

![linux](report_images/14_3.png)

- Рестарт службы в логах

### Part 15. Использование планировщика заданий CRON

Запуск косанды UPTIME каждые 2 минуты.

![linux](report_images/15_1.png)

- Вывод из системного журнала о выполнении задачи

![linux](report_images/15_2.png)

- Вывод текущих задач для CRON

Удаление всех задач.

![linux](report_images/15_3.png)

- Удаление и вывод о текущих задачах